<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="~{fragments/header :: header}"></head>
<body>
<div class="container">
    <form class="mt-3" th:action="@{/posts/edit}" method="post" enctype="multipart/form-data">
        <div class="row">
            <input type="hidden" name="id" th:field="${carPost.id}" />
            <input type="hidden" name="carId" th:field="${carPost.carId}" />
            <input type="hidden" name="engineId" th:field="${carPost.engineId}" />
            <input type="hidden" name="photoPath" th:field="${carPost.photoPath}">
            <div class="col-5">
                <div class="mb-3">
                    <input class="form-control" type="file" id="file" name="file" accept="image/*">
                    <img class="img-fluid w-100" id="preview" alt="preview"
                         th:src="@{/uploads/{fileName}(fileName=${carPost.photoPath})}">
                </div>
            </div>
            <div class="col-7">
                <div class="row mb-1">
                    <div class="col-3">
                        <label for="brand" class="form-label "><b>Бренд:</b></label>
                    </div>
                    <div class="col-9">
                        <input class="form-control" type="text" id="brand" name="brand" th:field="${carPost.brand}" required>
                    </div>
                </div>
                <div class="row mb-1">
                    <div class="col-3">
                        <label for="model" class="form-label "><b>Модель:</b></label>
                    </div>
                    <div class="col-9">
                        <input class="form-control" type="text" id="model" name="model" th:field="${carPost.model}" required>
                    </div>
                </div>
                <div class="row mb-1">
                    <div class="col-3">
                        <label for="engine" class="form-label"><b>Двигатель:</b></label>
                    </div>
                    <div class="col-9">
                        <input class="form-control" type="text" id="engine" name="engine" th:field="${carPost.engine}" required>
                    </div>
                </div>
                <div class="row mb-1">
                    <div class="col-3">
                        <label for="price" class="form-label"><b>Цена:</b></label>
                    </div>
                    <div class="col-9">
                        <input class="form-control" type="number" id="price" name="price" th:field="${carPost.price}" required min="1">
                    </div>
                </div>
                <div class="row mb-1">
                    <div class="col-3">
                        <label for="description" class="form-label"><b>Описание:</b></label>
                    </div>
                    <div class="col-9">
                        <textarea class="form-control" type="text" id="description" name="description" th:field="${carPost.description}"
                               required>
                        </textarea>
                    </div>
                </div>
                <div class="row mb-1">
                    <div class="col-3">
                        <label for="carBody" class="form-label "><b>Тип кузова:</b></label>
                    </div>
                    <div class="col-9">
                        <select class="form-control" id="carBody" name="carBody" th:field="${carPost.carBody}">
                            <option th:each="body : ${T(ru.job4j.cars.model.CarBody).values()}"
                                    th:value="${body}"
                                    th:text="${body.name().toLowerCase()}">
                            </option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-6"></div>
            <div class="col-6">
                <div class="row">
                    <div class="col-2"></div>
                    <div class="col-5">
                        <button class="btn btn-info w-100" type="submit">Обновить</button>
                    </div>
                    <div class="col-5">
                        <input class="btn btn-danger w-100" type="button" value="Назад" onclick="history.back()">
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
<footer th:insert="~{fragments/footer :: footer}"></footer>
</body>
<script>
    document.getElementById("file").addEventListener("change", function (event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                const img = document.getElementById("preview");
                img.src = e.target.result;
                img.style.display = "block";
            };
            reader.readAsDataURL(file);
        }
    });

</script>
</html>